# Тестовое задание по бекенду на PHP от Смотрова Дмитрия

## Задание
Для хранения учетных записей пользователей, в проекте была создана следующая таблица в БД:

```sql
create table users
(
    id int auto_increment,
    name varchar(64) not null,
    email varchar(256) not null,
    created DATETIME not null,
    deleted DATETIME null,
    notes TEXT null,
    constraint users_pk
        primary key (id)
);
 
create unique index users_email_uindex
    on users (email);
 
create unique index users_name_uindex
    on users (name);
```


Необходимо реализовать класс/классы для чтения, создания и изменения записей в таблице users. Необходимо учесть ряд дополнительных бизнес-требований к работе с пользователями:

* значение поля 'name' (имя пользователя):
    - может состоять только из символов a-z и 0-9;
    - не может быть короче 8 символов;
    - не должно содержать слов из списка запрещенных слов;
    - должно быть уникальным;

* значение поля 'email':
    - должно иметь корректный для e-mail адреса формат;
    - не должно принадлежать домену из списка "ненадежных" доменов;
    - должно быть уникальным;

* значение поля 'deleted':
    - отражает факт "удаления" пользователя (т. н. "soft-delete");
    - не может быть меньше значения поля 'created';
    - для неудаленного, активного пользователя равно NULL;

* каждое изменение существующей учетной записи пользователя должно журналироваться.

Основным критерием оценки будет являться то, насколько код будет production-ready, в том числе будут оцениваться:
архитектура решения и то, насколько она следует принципам SOLID, насколько проста для поддержки и дальнейшего развития;
грамотное использование современных возможностей языка PHP;
наличие и качество автоматических тестов;
стиль кода, использование единого стандарта оформления.
Реализация фактической работы с СУБД, журналирования, списков запрещенных слов и ненадежных доменов может быть опущена.
Использование сторонних библиотек/фреймворков не возбраняется, но и не является дополнительным плюсом к решению.

## Комментарии к решению
1. Так как в задании указано, то нужно реализовать soft-delete и в таблице users есть уникальные индексы на поля name и email,
то после soft-удаления пользователя он все равно остается в таблице, и новый пользователь с таким же именем или email не может быть создан.

2. Так как была предоставлена только одна таблица `users` я предположил, что список запрещенных слов и ненадежных доменов располагается где-то отдельно
и для упрощения реализовал его пока просто как in-memory, с сокрытием реализации через интерфейс.

3. Про журналирование изменений пользователя – я недостаточно понял что именно имеется ввиду. Это стоило уточнить, но для экономии времени не стал этого делать.
Я реализовал его как логирование в файл, но возможно имелось ввиду, что нужно делать что-то вроде аудита изменений в БД, могу доработать, если требуется.
